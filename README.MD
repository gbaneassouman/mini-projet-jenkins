
# Mini Projet Jenkins

Ce Projet dÃ©nommÃ© Mini projet jenkins a Ã©tÃ© rÃ©alisÃ© dans le cadre ma formation DEVOPS au cours du Bootcamp numÃ©ro 15 de **EAZYTraining avec Dirane Tafen et Ulrich Monji** qui s'est deroulÃ© de Septembre Ã  Novembre 2023.


## Objectifs
Il sâ€™agit ici de mettre en Å“uvre une chaÃ®ne dâ€™intÃ©gration continue pour un site web static *(voir image en dessous)* avec jenkins. le code source est [ici](https://github.com/diranetafen/static-website-example) .

![](pipeline.png)
 
## Ã€ faire
Pour la rÃ©alisation du project j'ai procÃ©dÃ© comme suit:
- 1 Provisionner 3 VPS 
- 2 installer docker sur chaque vps Ã  partir de la documentation officielle qui se trouve [ici](https://docs.docker.com/engine/install/debian/) 
- 3 Installer jenkins sur le vps 
- 4 Produire le Dockerfile pour le Build
- 5 La mise en place du Pipeline
- 6 Configurer github webhook
- 7 Notification slack



## Plan de Travail
J'ai suivi les Ã©tapes ci-dessous pour la rÃ©alisation du projet.

Jâ€™ai choisi 03 VPS de type Lightsail chez *AWS* *(01 pour Jenkins, 01 pour l'environnement de staging et le dernier pour l'environnement de la Prod)*

![](vps.png)
Sur chaque VPS jâ€™ai installÃ©Â  Debian 11.4, docker et docker-compose
Sur le VPS de jenkinsÂ :
  jâ€™ai installÃ© jenkins Ã  lâ€™aide de docker-compose. Dans ma configuration le conteneur nâ€™est accessible que sur la machine hÃ´te Ã  partir de  **127.0.0.1:8080**
![](docker-ps-a.png)
Afin dâ€™accÃ©der Ã  jenkins en dehors de lâ€™hÃ´te , jâ€™ai installÃ© Apache2 et fais un reverse proxy sur le **127.0.0.1:8080**

![](apache.png)

et  enfin configurÃ© letsencrypt avec un sous-domaine.

![](jenkins-url.jpg)

# Notification Slack 
![](.logo/slack-2.svg)
# 
Nous allons intÃ©grer slack Ã  notre environnement jenkins pour recevoir directement des notifications aprÃ¨s l'execution de notre pipeline.




# Installation du plugin slack-notification

Voici les Ã©tapes Ã  suivre pour ajouter lâ€™intÃ©gration Jenkins CI.

### Ã‰tape 1
Dans le tableau de bord Jenkins, cliquez sur GÃ©rer Jenkins dans la barre de navigation Ã  gauche.
![](.logo/slack-1.png)

### Ã‰tape 2
Cliquez sur Plugins puis Available plugins et recherchez Notification Slack dans lâ€™onglet search available plugins. Cochez la case et installez le plugin.

![](.logo/plugins-slack.png)

### Ã‰tape 3 
Une fois lâ€™installation effectuÃ©e, cliquez de nouveau sur Administrer Jenkins dans le volet de navigation gauche, puis accÃ©dez Ã  Configure System (Configurer le systÃ¨me).

Recherchez la section Global Slack Notifier Settings (ParamÃ¨tres de notification Slack globaux) et ajoutez les valeurs suivantes :

Sous-domaine de lâ€™Ã©quipe : **workspace**
Identifiant dâ€™authentification du jeton dâ€™intÃ©gration : CrÃ©ez un identifiant de  secret texte ayant pour valeur **Token**
NB:
Pour obtenir le **workspace** et **Token** il faut au prÃ©alable  comme suit:
- 1 crÃ©er un compte slack 
- 2 configurer l'intÃ©gration de jenkins Ã  partir d'[ici](https://myspace.slack.com/services/new/jenkins-ci)



![](.logo/slack-integration.png)

Ã  partir de cet instant on peux ajouter les notifications slack dans mon **Jenkinsfile**

Ã  fin de rendre disponible la notification slack Ã  tous les projets, je vais la transformer en **Shared Library** ce qui va permettre de faire un simple appel dans les **Jenkinsfiles**.

Pour ce faire j'ai :

- crÃ©er un depÃ´t **Github** [voir ici](https://github.com/gbaneassouman/shared-library/blob/main/vars/slackNotifier.groovy) et ajouter un fichier de type groovy appelÃ© *(slackNotifier.groovy)* ensuite definir la fonction de notification
![](.logo/slack-notifyer.png)

- configurer la Shared Library Ã  partir de ***Administrer jenkins -> System -> Global Pipeline Libraries***

![](.logo/shared-library.png)

- importer la Shared library prÃ©cÃ©demment configurÃ©e dans le Jenkinsfile 

![](.logo/import-shared.png)
- et faire appel Ã  la fonction de notification

![](.logo/slackNotifier.png)

## Demo

voir [ici](https://github.com/diranetafen/student-list.git "here")


## ðŸš€ Ã  propos de moi

Session           : Bootcamp DevOps NÂ°15 de EAZYTraining

PÃ©riode           : Septembre - Novembre

PrÃ©noms & Nom : Assouman GBANE 

LinkedIn          : https://www.linkedin.com/in/gbane-assouman-4ab183123/


## Environment Variables

To run this project, you will need to add the following environment variables to your .env file

`API_KEY`

`ANOTHER_API_KEY`

